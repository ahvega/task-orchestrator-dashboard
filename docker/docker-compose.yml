name: task-dashboard

services:
  dashboard:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    image: task-dashboard:latest
    container_name: task-dashboard
    ports:
      - "${DASHBOARD_PORT:-8888}:8888"
    environment:
      - TASK_ORCHESTRATOR_DB=${TASK_ORCHESTRATOR_DB:-/data/tasks.db}
      - ENABLE_WEBSOCKET=${ENABLE_WEBSOCKET:-true}
      - ENABLE_DOCKER_DETECTION=${ENABLE_DOCKER_DETECTION:-false}
    volumes:
      # Reuse the MCP server's named volume that contains tasks.db
      # Note: SQLite requires write access even for reads (for WAL files)
      - mcp-task-data:/data
    restart: unless-stopped

volumes:
  mcp-task-data:
    external: true
    name: mcp-task-data
